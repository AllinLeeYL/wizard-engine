// Copyright 2020 Ben L. Titzer. All rights reserved.
// See LICENSE for details of Apache 2.0 license.

def T = UnitTests.registerT("jawa:math:", _, JawaMathTester.new, _);
def X = [
	T("exp", test_exp),
	()
];

class JawaMathTester(t: Tester) {
	def assertd(expected: double, got: double) {
		var exbits = u64.view(expected), gbits = u64.view(got);
		if (exbits != gbits) return t.fail2("expected double %x, got %x", exbits, gbits);
	}
}

def test_exp(t: JawaMathTester) {
	t.assertd(1, JawaMath.exp(0));
	t.assertd(20.085536923187668, JawaMath.exp(3.0));
	t.assertd(22.197951281441636, JawaMath.exp(3.1));
	t.assertd(1.2340980408667956E-4, JawaMath.exp(-9.0));
	t.assertd(3.3546262790251185E-4, JawaMath.exp(-8.0));
	t.assertd(0.004086771438464067, JawaMath.exp(-5.5));
	t.assertd(0.050287436723591865, JawaMath.exp(-2.99));
	t.assertd(0.9048374180359595, JawaMath.exp(-0.1));
	t.assertd(2.7182818284590455, JawaMath.exp(1.0));
}
